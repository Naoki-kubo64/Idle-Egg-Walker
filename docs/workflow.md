# 🛠️ 開発・運用ワークフロー

## 🎨 アセット制作〜組み込み

このプロジェクトでは、画像生成 AI で作成したアセットを効率的に組み込むためのワークフローを整備しています。

### 1. アセットの生成

#### A. Web ツール等を使う場合

`docs/ai_prompts.md` のプロンプトガイドを参考に、好みのドット絵生成 AI（Nano Banana など）で画像を生成してください。

#### B. コマンドラインで生成する場合 (Nano Banana / Gemini API)

Zenn の記事を参考に実装されたスクリプトを使用します。

**準備:**

1. [Google AI Studio](https://aistudio.google.com/) で API キーを取得。
2. 環境変数に設定: `$env:GEMINI_API_KEY="あなたのAPIキー"`

**実行:**

```bash
# 例: tempフォルダにドラゴンの画像を生成
node scripts/generate_image.mjs "cute baby dragon" "temp/dragon.png"
```

※ 自動的に「ドット絵、16-bit スタイル」の補正がかかります。

### 2. アセットの取り込み

スクリプトを使用して、生成した画像をプロジェクトに取り込みます。

1. 生成した画像を PC 上のどこか（ダウンロードフォルダや temp フォルダ）に用意。
2. 以下のコマンドを実行：
   ```bash
   dart scripts/import_assets.dart
   ```
3. 対話プロンプトに従って入力：
   - ファイルパス（ドラッグ＆ドロップで入力できます）
   - モンスター ID（例: 1）
   - タイプ（Baby, Teen, Adult, Egg）

**必要な画像セット:**

1. **卵** (例: `egg_001.png`)
2. **幼体** (例: `monster_001_baby.png`)
3. **成長期** (例: `monster_001_teen.png`)
4. **成体** (例: `monster_001_adult.png`)

### 3. アプリの確認

```bash
flutter run
```

でアプリを起動し、アセットが反映されているか確認してください。

## 🧪 テスト・デバッグ機能

開発中の確認のために、いくつかのデバッグ機能があります。

- **リセット**: アプリを再インストールするか、ストレージを消去するとデータがリセットされます。
- **進化テスト**: タップ連打で Exp を貯めるか、`GameConstants.dart` の閾値を一時的に下げることで進化をすぐに確認できます。
